
# 抽象类

所谓的抽象类就是包含给定属性或方法声明的的类,一般来说抽象类都只声明不赋值,但作为一种动态语言,Python的抽象类和JAVA这种静态语言有很大不同.
首先Python的类模型是基于方法(接口)的鸭子类型,而静态语言的JAVA是基于类型的,因此Python抽象类看起来相当简单也符合人类直觉,而JAVA就要细致的考虑太多.

首先看看怎么定义一个抽象类

> 基础版


```python
class Base1(object):
    attribute1 = 0
    def func1(self):
        pass
```


```python
obj1 = Base1()
```


```python
obj1.func1()
```

这是最基础的版本,Python没有单独的声明,所以必须给属性付个初值,这样定义一般也就可以了,但有几个缺点:

+ 无法限定抽象方法必须被实现
+ 依然可以被实例化

不过不考究的一般用用就可以了

> 进阶版


```python
class Base2(object):
    attribute1 = 0
    def func1(self):
        raise NotImplementedError
```


```python
obj2 = Base2()
```


```python
obj2.func1()
```


    ---------------------------------------------------------------------------

    NotImplementedError                       Traceback (most recent call last)

    <ipython-input-6-b83d011412a9> in <module>()
    ----> 1 obj2.func1()
    

    <ipython-input-4-baa4769d540f> in func1(self)
          2     attribute1 = 0
          3     def func1(self):
    ----> 4         raise NotImplementedError
    

    NotImplementedError: 


这一版可以检测时候方法被实现了,但依然没有根本上解决前面所说的两个问题,而且如果不运行或者做单元测试,我们可能会带着没有实现的抽象类的方法运行程序,还是很危险的

> 高级版

+ (2.7)


```python
from abc import ABCMeta,abstractmethod
class Base3(object):
    __metaclass__ = ABCMeta
    attribute1 = 0
    @abstractmethod
    def func1(self):
        return
```


```python
obj3 = Base3()
```


    ---------------------------------------------------------------------------

    TypeError                                 Traceback (most recent call last)

    <ipython-input-8-7484021c4770> in <module>()
    ----> 1 obj3 = Base3()
    

    TypeError: Can't instantiate abstract class Base3 with abstract methods func1


+ (3.X)


```python
from abc import ABCMeta,abstractmethod
import sys
class Base3(metaclass = ABCMeta):
    __metaclass__ = ABCMeta
    attribute1 = 0
    @abstractmethod
    def func1(self):
        return
```


```python
obj3 = Base3()
```


    ---------------------------------------------------------------------------

    TypeError                                 Traceback (most recent call last)

    <ipython-input-2-7484021c4770> in <module>()
    ----> 1 obj3 = Base3()
    

    TypeError: Can't instantiate abstract class Base3 with abstract methods func1


可以看出abc模块基本解决了python抽象类的问题但一定要小心,这种方式使用了元类,因此不容易跨版本兼容.而且多数时候我们对抽象类并没有太多的需求,毕竟鸭子类型嘛,所以一般没啥人用第三种,而是第一种比较多
