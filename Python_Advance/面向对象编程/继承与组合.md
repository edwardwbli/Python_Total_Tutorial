
# 继承与组合

对象与对象间的关系往往可以用继承和组合两种形式来表现.我们来通过一个披萨饼店例子来看看什么是继承什么是组合

## oop和继承--"is a "关系

披萨饼店中会有服务员,有大厨等各种员工,他们各有特点,但每个对象(员工)都可以用工作职位的类型来归类抽象,通过提取员工的共性就可以得到他们的类继承树.


```python
%%writefile  employee.py

#coding:utf-8

class Employee(object):
    u"""员工基类,规定名字,薪水的基本属性和基本的方法,涨工资,工作,打印
    """
    id = 0
    def __init__(self,name,salary=0):
        self.id = Employee.id
        self.name = name
        self.salary = salary
        Employee.id += 1

    def salary_raise(self,raised_ratio=0,raised_value=0):
        self.salary = self.salary*(1+raised_ratio)+raised_value

    def work(self):
        print(self.name," is working!")

    def __repr__(self):
        return "<id:{id}, employee:{name},salary:{salary}>".format(id = self.id,name = self.name,salary = self.salary)

class Chef(Employee):
    def __init__(self,name):
        Employee.__init__(self,name,5000)

    def work(self):
        print(self.name,"is cooking!")

class Waiter(Employee):
    def __init__(self,name):
        Employee.__init__(self,name,2000)
    def work(self):
        print(self.name,"is servering a customer")

class PizzaRobot(Chef):
    def __init__(self,name):
        Chef.__init__(self,name)

    def work(self):
        print(self.name,"is cooking pizzas")

```

    Overwriting employee.py



```python
from employee import *
```


```python
bob = PizzaRobot("bob")
print(bob)
bob.work()
bob.salary_raise(raised_ratio=0.05)
print(bob)
```

    <id:0, employee:bob,salary:5000>
    bob is cooking pizzas
    <id:0, employee:bob,salary:5250.0>



```python
for class_ in Employee,Chef,Waiter,PizzaRobot:
    obj = class_(class_.__name__)
    obj.work()
```

    Employee  is working!
    Chef is cooking!
    Waiter is servering a customer
    PizzaRobot is cooking pizzas


**同样的,顾客,工具等等都是各自是一类对象,也就是 "JoJo is a Customer."**


```python
%%writefile customer.py

#coding:utf-8

class Customer:
    def __init__(self,name):
        self.name = name
        
    def order(self,waiter):
        print(self.name," ordered a pizza from ",waiter)

    def pay(self,waiter):
        print(self.name," has payed to ",waiter)
```

    Overwriting customer.py



```python
%%writefile tools.py

#coding:utf-8

class Oven:
    def bake(self):
        print("Baking...")

```

    Overwriting tools.py


## oop和组合--"has a"关系

但与其他不同,披萨屋虽然是披萨屋,但它隐含的意义是披萨屋包含一些员工,一些工具,并可以接待客人.接着咱来看看如何定义披萨屋.


```python
%%writefile pizzaShop.py

#coding:utf-8

from employee import *
from tools import *
from customer import *
class PizzaShop:

    def __init__(self):
        self.waiter = Waiter("Pat")
        self.chef = PizzaRobot('Bob')
        self.oven = Oven()

    def order(self,name):
        customer = Customer(name)
        customer.order(self.waiter)
        self.chef.work()
        self.oven.bake()
        customer.pay(self.waiter)

```

    Overwriting pizzaShop.py



```python
from pizzaShop import  PizzaShop
```


```python
scene = PizzaShop()
```


```python
scene.order("JoJo")
```

    JoJo  ordered a pizza from  <id:5, employee:Pat,salary:2000>
    Bob is cooking pizzas
    Baking...
    JoJo  has payed to  <id:5, employee:Pat,salary:2000>

